# 1、底层工具
**（1）基座模型：** 以 ChatGLM3-6B 模型为基础，通过 LoRA 微调方法在中医药指令数据集ShenNong_TCM_Dataset 上进行微调以获得准确度更高的中医药大模型，微调后的大模型将作为该系统智能问答的基座大模型。

**（2）Embedding模型：** 使用专门针对中文语言任务进行优化的bge-large-zh-v1.5，将划分后的文本块转换为向量供后续相似度计算使用。

**（3）向量库：** 使用FAISS对向量化后的向量进行存储，同时FAISS能够进行最近邻搜索，找到与用户问题语义最相似的文本。

**（4）数据库：** 使用SQLite数据库以（问题ID，问题，出现次数）的形式将用户输入的问题存储，无需单独的服务器进程，只需依赖SQLite动态库即可实现数据库功能。

**（5）页面布局：** 使用Stramlit实现整个系统的前端架构，通过StreamLit框架的组件实现了数据可视化、用户对话及知识库管理等平台。

# 2、前台模块
前台模块以为病患提供最优质查询服务为宗旨，设计了“首页”及“对话”两个板块供用户选择使用。

**（1）首页板块：** 使用Streamlit和SQLAlchemy实现快捷式智能问答功能，该页面为用户提供医院各科室常见问题，用户可选择相应科室中想要咨询的问题“一站式”获得最精准的解答，无需在自行输入问题环节增加时间成本；

**（2）对话板块：** 若首页板块提供的常见问题暂无用户想要咨询的问题，则跳转至对话板块。该页面将LangChain框架及后台模块的向量库结合，可实现多轮对话和知识检索。通过将向量化后的用户问题与知识库中的文本向量做相似度计算，找到与问题最相似的TOP K个文本片段，共同组成prompt输入到微调后的ChatGLM3-6B模型中以获得最精确的回答；同时通过BERT模型及莱文斯坦距离匹配问题的科室及数据库中最相似的问题，从而更新该行数据的出现次数或作为新数据插入到数据库中。

# 3、后台模块
后台模块以为医院管理人员提供最便捷、最直观的数据可视化及知识库管理服务为宗旨，设计了“数据监控”及“知识库管理”两个板块供管理人员选择使用。

**（1）数据监控板块：** 使用Streamlit和SQLite实现数据可视化管理平台，通过动态选择科室，展示其对应的高频问题，并以饼图形式展示各科室问题分布，为病历管理、学术研究等方面提供了极大的参考作用。

**（2）知识库管理板块：** 使用Embedding模型及向量库实现知识库管理平台，对上传至知识库的文档先进行分块处理，再通过Embedding模型进行向量化以支持高校的相似度搜索和知识匹配。
